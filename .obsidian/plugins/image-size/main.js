/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var u=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var F=(n,a)=>{for(var e in a)u(n,e,{get:a[e],enumerable:!0})},$=(n,a,e,i)=>{if(a&&typeof a=="object"||typeof a=="function")for(let t of E(a))!b.call(n,t)&&t!==e&&u(n,t,{get:()=>a[t],enumerable:!(i=z(a,t))||i.enumerable});return n};var x=n=>$(u({},"__esModule",{value:!0}),n);var M={};F(M,{default:()=>l});module.exports=x(M);var s=require("obsidian"),I={imageSize:"550",imagePath:"img",useWikiLinks:!1,useDirectoryTravel:!0},l=class extends s.Plugin{async onload(){console.log("loading plugin image size"),await this.loadSettings(),this.addSettingTab(new d(this.app,this)),this.registerEvent(this.app.workspace.on("editor-paste",async(e,i)=>{var m,f;let t=(m=e.clipboardData)==null?void 0:m.items,c=this.app.fileManager;if(t)for(let h=0;h<t.length;h++){let S=t[h];if(S.type.startsWith("image/")){e.preventDefault();let y=S.getAsFile();if(y){let r=(f=this.app.workspace.getActiveViewOfType(s.MarkdownView))==null?void 0:f.editor;if(!r)return;let o=new Date,w=`${o.getFullYear()}${(o.getMonth()+1).toString().padStart(2,"0")}${o.getDate().toString().padStart(2,"0")}${o.getHours().toString().padStart(2,"0")}${o.getMinutes().toString().padStart(2,"0")}${o.getSeconds().toString().padStart(2,"0")}`,v=`Pasted image ${w}.png`,A=`Pasted%20image%20${w}.png`,g=`${this.settings.imagePath}/${v}`,D=g;if(await this.app.vault.adapter.exists(v))console.log("File already exists.");else{let P=await y.arrayBuffer();await this.app.vault.createBinary(g,P)}this.settings.useDirectoryTravel&&(D="../../../../../../"+g,console.log(g));let T=this.app.vault.getFileByPath(g),p=r.getCursor();if(!this.app.workspace.getActiveFile())return;if(!T){console.log("tfile not found");return}let k="!"+c.generateMarkdownLink(T,D,"",this.settings.imageSize);r.replaceRange(k,p),r.setCursor({line:p.line,ch:p.ch+k.length})}break}}}))}onunload(){}async loadSettings(){this.settings=Object.assign({},I,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},d=class extends s.PluginSettingTab{constructor(e,i){super(e,i);this.plugin=i}display(){let{containerEl:e}=this;e.empty(),new s.Setting(e).setName("Default image size").setDesc("Set the default size for pasted images (e.g., 550)").addText(i=>i.setPlaceholder("Enter size like 600").setValue(this.plugin.settings.imageSize||"550").onChange(async t=>{this.plugin.settings.imageSize=t,await this.plugin.saveSettings()})),new s.Setting(e).setName("Image path").setDesc("Set the default path for pasted images (e.g., img), better be the same as the attachment folder in your settings.").addText(i=>i.setPlaceholder("Enter path like img").setValue(this.plugin.settings.imagePath||"img").onChange(async t=>{this.plugin.settings.imagePath=t,await this.plugin.saveSettings()})),new s.Setting(e).setName('Add "../../../../../../" to the image path in md mode').setDesc("If you want to directly push your md to your blog via hugo, I recommand you to set the image path as ../../../../../../img. BUT once you turn on this option, you must put the img file in your vault's root directory.").addToggle(i=>{var t;return i.setValue((t=this.plugin.settings.useDirectoryTravel)!=null?t:!0).onChange(async c=>{this.plugin.settings.useDirectoryTravel=c,await this.plugin.saveSettings()})})}};

/* nosourcemap */